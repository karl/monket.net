<!DOCTYPE html><html lang="en"><head><meta charset="utf-8"><meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1"><meta name="viewport" content="width=device-width"><title>Karl O'Keeffe</title><link rel="alternate" href="/feed.xml" type="application/rss+xml" title=""><link rel="apple-touch-icon" href="/apple-touch-icon.png"><style>body {
  box-sizing: border-box;
  color: #333;
  font-family: 'Helvetica Neue', Helvetica, Arial, sans-serif;
  font-size: 11px; /* For the PDF CV */
  letter-spacing: 0.2px;
  line-height: 1.6;
  -webkit-font-smoothing: antialiased;
  word-wrap: break-word;
}

.page {
  font-size: 16px; /* For the Website */
}

a {
  color: #2469C8;
  text-decoration: none;
}

a:hover {
  text-decoration: underline;
}

h1, h2, h3, h4, h5, h6, p, body, a, img, ul, ol, blockquote, pre {
  margin: 0; padding: 0; border: 0;
}

body {
  background-color: #ffffff;
  /*text-rendering: optimizeLegibility;*/
}

.content-wrap {
  width: 34em;
  margin: 0 auto;
}

p {
  margin-top: 0;
  margin-bottom: 16px;
}

h1 {
  font-size: 2em;
  margin-bottom: 1em;
}

h2 {
  position: relative;
  margin-top: 1em;
  margin-bottom: 16px;
  font-weight: bold;
  padding-bottom: .3em;
  font-size: 1.75em;
  line-height: 1.225;
  border-bottom: 1px solid #eee;
}

h3 {
  position: relative;
  margin-top: 1em;
  margin-bottom: 16px;
  font-weight: bold;
  font-size: 1.5em;
  line-height: 1.43;
}

ol, ul {
  padding: 0;
  padding-left: 2em;
  margin-top: 0;
  margin-bottom: 16px;
}

blockquote {
  margin: 1.2em 3em;
  padding-left: 1em;
  font-style: italic;
}

hr {
  border: 0;
  border-top: 1px dashed #d2d2d2;
  height: 0;
  margin: 1.6em 0;
}

/* page header */

.header {
  padding: 2em;
  background: #FFA91A;
}

.header h1 {
  font-size: 2.6em;
  text-align: center;
  font-weight: 700;
  margin: 0;
}

.header a, .header a:hover {
  text-decoration: none;
  color: #ffffff;
}

/* page footer */

footer {
  margin: 3em 0;
}

footer .nav {
  text-align: center;
  margin-top: 5em;
  margin-bottom: 3.5em;
}

footer .nav a {
  padding: 0 0.5em;
  font-size: 1.2em;
  text-decoration: none;
}

footer .about {
  padding: 2.2em 3em;
  text-align: center;
  color: #888;
}

/* article */

.article {
  margin: 3em 0 4em;
}

.article header .date {
  text-align: center;
  margin-top: -0.7em;
}

.article .content img {
  display: block;
  width: 100%;
}

/* code styling */

p code,
h2 code {
  font-family: Consolas,"Liberation Mono",Menlo,Courier,monospace;
  padding: 0;
  padding-top: .2em;
  padding-bottom: .2em;
  margin: 0;
  font-size: 85%;
  background-color: #f7f7f7;
  border-radius: 3px;
}

h2 code:before,
h2 code:after,
p code:before,
p code:after {
  letter-spacing: -0.2em;
  content: "\00a0";
}

pre {
  font-family: Consolas,"Liberation Mono",Menlo,Courier,monospace;
  word-wrap: normal;
  padding: 16px;
  overflow: auto;
  /*font-size: 100%;*/
  font-size: 13.6px;
  line-height: 1.45;
  background-color: #f7f7f7;
  border: 0;
  border-radius: 3px;
  margin-top: 0;
  margin-bottom: 16px;
}

pre code {
  display: inline;
  max-width: initial;
  padding: 0;
  margin: 0;
  overflow: initial;
  line-height: inherit;
  word-wrap: normal;
  background-color: transparent;
  border: 0;
  /*font-size: 100%;*/
  white-space: pre;
  background: transparent;
  border-radius: 3px;
}

/* syntax hl stuff */

code.lang-markdown {
  color: #424242;
}

code.lang-markdown .header,
code.lang-markdown .strong {
  font-weight: bold;
}

code.lang-markdown .emphasis {
  font-style: italic;
}

code.lang-markdown .horizontal_rule,
code.lang-markdown .link_label,
code.lang-markdown .code,
code.lang-markdown .header,
code.lang-markdown .link_url {
  color: #555;
}

code.lang-markdown .blockquote,
code.lang-markdown .bullet {
  color: #bbb;
}

/* Tomorrow Theme */
/* http://jmblog.github.com/color-themes-for-google-code-highlightjs */
/* Original theme - https://github.com/chriskempson/tomorrow-theme */
/* http://jmblog.github.com/color-themes-for-google-code-highlightjs */
.tomorrow-comment, pre .comment, pre .title {
  color: #8e908c;
}

.tomorrow-red, pre .variable, pre .attribute, pre .tag, pre .regexp, pre .ruby .constant, pre .xml .tag .title, pre .xml .pi, pre .xml .doctype, pre .html .doctype, pre .css .id, pre .css .class, pre .css .pseudo {
  color: #c82829;
}

.tomorrow-orange, pre .number, pre .preprocessor, pre .built_in, pre .literal, pre .params, pre .constant {
  color: #f5871f;
}

.tomorrow-yellow, pre .class, pre .ruby .class .title, pre .css .rules .attribute {
  color: #eab700;
}

.tomorrow-green, pre .string, pre .value, pre .inheritance, pre .header, pre .ruby .symbol, pre .xml .cdata {
  color: #718c00;
}

.tomorrow-aqua, pre .css .hexcolor {
  color: #3e999f;
}

.tomorrow-blue, pre .function, pre .python .decorator, pre .python .title, pre .ruby .function .title, pre .ruby .title .keyword, pre .perl .sub, pre .javascript .title, pre .coffeescript .title {
  color: #4271ae;
}

.tomorrow-purple, pre .keyword, pre .javascript .function {
  color: #8959a8;
}

/* media queries */

@media (max-width: 690px) {
  .content-wrap {
    width: auto;
    padding: 0 1em;
  }
  .header {
    padding: 1em;
  }
  .header h1 {
    font-size: 1.4em;
  }
  .article {
    margin: 1em 0 2.5em;
  }
  .archive {
    width: 80%;
    margin: 0 auto;
  }
  .archive * {
    float: none !important;
    line-height: 1.6 !important;
    width: auto !important;
    height: auto !important;
    text-align: left !important;
    border: 0 !important;
    margin: 0 !important;
  }
  footer .nav {
    margin: 1em 0;
  }
  footer .about {
    padding: 0;
    padding-top: 1.6em;
  }
  footer .about p {
    margin-bottom: 1em;
  }
}
</style></head><body class="page"><header class="header"><div class="content-wrap"><div class="logo"><h1><a href="/">Karl O'Keeffe</a></h1></div></div></header><div id="content"><div class="content-wrap"><article class="article intro"><header><h2><a href="/blog/articles/small-update-to-loris-0-1-3/">Small Update to Loris (0.1.3)</a></h2><p class="date"><span>12. April 2010</span></p></header><section class="content"><p>A few months ago <a href="/articles/loris-autotest-for-javascript/">I wrote about Loris</a>, a small tool that will automatically run your javascript tests whenever a file<span class="widont">&nbsp;</span>changes.</p>
<p>I’ve just released a new version of the <a href="http://rubygems.org/gems/loris">Loris gem</a> with a couple of minor<span class="widont">&nbsp;</span>fixes:</p>
<ul>
<li><p>The dependency on <code>win32-process</code> has now been removed from the gem. This means the gem now installs correctly on <span class="caps">OSX</span>. Windows users will manually need to install the <code>win32-process</code> gem.</p>
</li>
<li><p>The dependancy on <code>visionmedia-bind</code> has been updated to just <code>bind</code>, reflecting the gems new name on<span class="widont">&nbsp;</span>RubyGems.</p>
</li>
<li><p>The <span class="caps">JS</span> Test Driver server is now reset between all tests. This stops it getting into a situation where it failed to pick up changes to<span class="widont">&nbsp;</span>files.</p>
</li>
</ul>
<p>Because <a href="http://rubygems.org/">RubyGems</a> is now the default gem host, this install process is a little<span class="widont">&nbsp;</span>simpler.</p>
<pre><code class="language-bash">sudo gem install loris</code></pre>
<p>or on Windows</p>
<pre><code class="language-bash">gem install loris
gem install win32-process</code></pre>
</section></article><article class="article intro"><header><h2><a href="/blog/articles/qunitadapter-1-1-0/">QUnitAdapter 1.1.0</a></h2><p class="date"><span>09. April 2010</span></p></header><section class="content"><p>I’ve updated the <span class="caps">JS</span> Test Driver <a href="http://code.google.com/p/js-test-driver/wiki/QUnitAdapter">QUnitAdapter</a> to improve compatibility with<span class="widont">&nbsp;</span>QUnit.</p>
<p>Variables set on the <code>this</code> object within are now available within setup, teardown, and the tests<span class="widont">&nbsp;</span>themselves.</p>
<pre><code class="language-javascript"><span class="built_in">module</span>(<span class="string">'Lifecycle'</span>, {
  <span class="attr">setup</span>: <span class="function"><span class="keyword">function</span>(<span class="params"></span>) </span>{
    <span class="keyword">this</span>.mockString = <span class="string">"some string"</span>;
  },
  <span class="attr">teardown</span>: <span class="function"><span class="keyword">function</span>(<span class="params"></span>) </span>{
    equals(<span class="keyword">this</span>.mockString, <span class="string">"some string"</span>);
  }
});

test(<span class="string">"Things assigned to this in setup are available in test"</span>, <span class="function"><span class="keyword">function</span>(<span class="params"></span>) </span>{
  equals(<span class="keyword">this</span>.mockString, <span class="string">"some string"</span>);
});</code></pre>
<p>The <code>test</code> function now supports the optional second parameter of the expected number of<span class="widont">&nbsp;</span>assertions.</p>
<pre><code class="language-javascript"><span class="comment">// declare that this test has expects 1 assertion</span>
test(<span class="string">'Test with expected defined as 2<span class="ord">nd</span> param'</span>, <span class="number">1</span>, <span class="function"><span class="keyword">function</span>(<span class="params"></span>)</span>{
  ok(<span class="literal">true</span>);
});</code></pre>
<p>My thanks go to <code>anotherhero</code> for providing the <a href="http://code.google.com/p/js-test-driver/issues/detail?id=116">patch</a> to fix both these<span class="widont">&nbsp;</span>issues.</p>
<p>You can always <a href="http://code.google.com/p/js-test-driver/wiki/QUnitAdapter">download the latest version of QUnitAdapter from Google<span class="widont">&nbsp;</span>Code</a>.</p>
</section></article><article class="article intro"><header><h2><a href="/blog/articles/detecting-when-a-page-is-loaded-from-the-browser-cache/">Detecting when a page is loaded from the browser cache</a></h2><p class="date"><span>12. February 2010</span></p></header><section class="content"><p>When a user presses the back button in their browser to return to a previous page, that page is usually loaded straight from the browser’s cache, without any requests being made to the server. When that page shows information that could be out of date (such a an old list of products in your basket) this can cause<span class="widont">&nbsp;</span>problems.</p>
<p>So how about we knock up a little code that allows us to determine whether the page has been loaded from the server or the browsers cache. Then we can reload those parts of the page that may need updating (such as the<span class="widont">&nbsp;</span>basket).</p>
<p>We can do this by setting a cookie on every response from the server, and modifying that cookie using javascript. We can then use this cookie to know whether the page has been loaded from the server or the browser<span class="widont">&nbsp;</span>cache.</p>
<p class="more"><a href="/blog/articles/detecting-when-a-page-is-loaded-from-the-browser-cache/">more</a></p></section></article><article class="article intro"><header><h2><a href="/blog/articles/qunitadapter-1-0-3/">QUnitAdapter 1.0.3</a></h2><p class="date"><span>10. November 2009</span></p></header><section class="content"><p>Just a small update to the <span class="caps">JS</span> Test Driver <a href="http://code.google.com/p/js-test-driver/wiki/QUnitAdapter">QUnitAdapter</a>. Version 1.0.3 has been released, and fixes a single<span class="widont">&nbsp;</span>bug:</p>
<p><strong><a href="http://code.google.com/p/js-test-driver/issues/detail?id=64">Issue 64</a>: QUnit Adapter fails to run tests if you don’t include a<span class="widont">&nbsp;</span>module</strong></p>
<p>You can now declare tests without a module, and they will run under the <code>Default Module</code>. In previous versions these tests would be silently ignored<span class="widont">&nbsp;</span>(whoops!).</p>
<p>You can always <a href="http://code.google.com/p/js-test-driver/wiki/QUnitAdapter">download the latest version of QUnitAdapter from Google<span class="widont">&nbsp;</span>Code</a>.</p>
</section></article><article class="article intro"><header><h2><a href="/blog/articles/loris-autotest-for-javascript/">Loris Autotest for Javascript</a></h2><p class="date"><span>06. November 2009</span></p></header><section class="content"><p>I’ve previously written a number of posts on javascript and autotest. Explaining how to integrate javascript lint, unit tests, and growl with the ruby <a href="http://ph7spot.com/articles/getting_started_with_autotest">Autotest</a><span class="widont">&nbsp;</span>project.</p>
<p>While this all worked, it felt a little clunky as Autotest doesn’t natively support the idea of running multiple tasks one after the other. Rather than hack at the Autotest codebase, I thought I’d get some ruby experience by rolling my own autotest-style framework. Not great for reuse of code, but a great way for me to learn<span class="widont">&nbsp;</span>:)</p>
<p class="more"><a href="/blog/articles/loris-autotest-for-javascript/">more</a></p></section></article><article class="article intro"><header><h2><a href="/blog/articles/screenshots-of-failing-cucumber-scenarios/">Screenshots of Failing Cucumber Scenarios</a></h2><p class="date"><span>14. September 2009</span></p></header><section class="content"><p>At 7digital we use <a href="http://cukes.info/">Cucumber</a> and <a href="http://wtr.rubyforge.org/">Watir</a> for running acceptance tests on some of our<span class="widont">&nbsp;</span>websites.</p>
<p>These tests can help greatly in spotting problems with configuration, databases, load balancing, etc that unit testing<span class="widont">&nbsp;</span>misses.</p>
<p>But because the tests exercise the whole system, from the browser all the way through the the database, they can tend be flakier than unit tests. Then can fail one minute and work the next, which can make debugging them a<span class="widont">&nbsp;</span>nightmare.</p>
<p>So, to make the task of spotting the cause of failing acceptance tests easier, how about we set up Cucumber to take a screenshot of the desktop (and therefore browser) any time a scenario<span class="widont">&nbsp;</span>fails.</p>
<p class="more"><a href="/blog/articles/screenshots-of-failing-cucumber-scenarios/">more</a></p></section></article><article class="article intro"><header><h2><a href="/blog/articles/cucumber-tests-as-first-class-citizens-in-teamcity/">Cucumber Tests as First Class Citizens in TeamCity</a></h2><p class="date"><span>03. September 2009</span></p></header><section class="content"><p><a href="http://www.jetbrains.com/teamcity/">TeamCity</a> is a great continuous integration server, and has brilliant built in support for running <a href="http://www.nunit.org/">NUnit</a> tests. The web interface updates automatically as each test is run, and gives immediate feedback on which tests have failed without waiting for the entire suite to finish. It also keeps track of tests over multiple builds, showing you exactly when each test first failed, how often they fail<span class="widont">&nbsp;</span>etc.</p>
<p>If like me you are using <a href="http://cukes.info/">Cucumber</a> to run your acceptance tests, wouldn’t it be great to get the same level of TeamCity integration for every Cucumber test. Well now you can, using the <code>TeamCity::Cucumber::Formatter</code> from the TeamCity 5.0 <span class="caps">EAP</span><span class="widont">&nbsp;</span>release.</p>
<p>JetBrains, the makers of TeamCity, released a <a href="http://blogs.jetbrains.com/ruby/2009/08/testing-rubymine-with-cucumber/">blog post demostrating the Cucumber test integration</a>, but without any details in how to set it up yourself. So I’ll take you through it<span class="widont">&nbsp;</span>here.</p>
<p class="more"><a href="/blog/articles/cucumber-tests-as-first-class-citizens-in-teamcity/">more</a></p></section></article><article class="article intro"><header><h2><a href="/blog/articles/qunit-to-jspec-adapter/">QUnit to JSpec Adapter</a></h2><p class="date"><span>03. September 2009</span></p></header><section class="content"><p><a href="http://visionmedia.github.com/jspec/">JSpec</a> is a Javascript <span class="caps">BDD</span> framework with a lot of great things going for it: It can run without a browser (great for continuous integration servers), it
has a Ruby style custom syntax which makes tests easier to write and read, and
it uses a <span class="caps">BDD</span> style describe/should<span class="widont">&nbsp;</span>syntax.</p>
<p>It’s a very tempting framework to use, but I already have a large collection
of tests using qunit. I don’t want to use two frameworks for one project, and I
don’t want to rewrite 300+ tests, so what to<span class="widont">&nbsp;</span>do?</p>
<p>How about a QUnit to JSpec Adapter, in the vein of my
<a href="/articles/new-qunit-to-js-test-driver-adapter/">QUnit to <span class="caps">JS</span> Test Driver Adapter</a>. Just load the adapter into JSpec as a
normal javascript file, and you can now<code>exec()</code> qunit test files in<span class="widont">&nbsp;</span>JSpec.</p>
<p class="more"><a href="/blog/articles/qunit-to-jspec-adapter/">more</a></p></section></article><article class="article intro"><header><h2><a href="/blog/articles/qunit-adapter-1-0-2/">QUnit Adapter 1.0.2</a></h2><p class="date"><span>30. August 2009</span></p></header><section class="content"><p>A new version of the <a href="http://code.google.com/p/js-test-driver/wiki/QUnitAdapter"><span class="caps">JS</span> Test Driver QUnit Adapter</a> is<span class="widont">&nbsp;</span>available.</p>
<p>Version 1.0.2 fixes a small bug where a module lifecycle object without Setup or Teardown methods would cause a test to error. For<span class="widont">&nbsp;</span>example:</p>
<pre><code class="language-javascript"><span class="built_in">module</span>(<span class="string">'Lifecycle'</span>, {});

test(<span class="string">''</span>, <span class="function"><span class="keyword">function</span>(<span class="params"></span>) </span>{
    expect(<span class="number">1</span>);
    ok(<span class="literal">true</span>, <span class="string">'tests still run successfully even if Setup and Teardown are undefined'</span>);
});</code></pre>
<p>Would give the error <code>Lifecycle.test  error (1.00 ms): Result of expression &#39;l.setUp&#39; [undefined] is not a function.</code>.</p>
<p>This is now fixed so the test behaves as if no lifecycle was<span class="widont">&nbsp;</span>defined.</p>
<p>You can get the new <a href="http://code.google.com/p/js-test-driver/wiki/QUnitAdapter">1.0.2 verison of the QUnit Adapter from Google<span class="widont">&nbsp;</span>Code</a>.</p>
</section></article><article class="article intro"><header><h2><a href="/blog/articles/running-js-test-driver-in-team-city/">Running JS Test Driver in Team City</a></h2><p class="date"><span>25. August 2009</span></p></header><section class="content"><p><a href="http://code.google.com/p/js-test-driver/"><span class="caps">JS</span> Test Driver</a> is a great new Javascript Testing Framework from the guys at Google. It provides a blisteringly fast, and easily automated way of running your Javascript unit tests. See this <a href="http://misko.hevery.com/2009/05/22/yet-another-javascript-testing-framework/">introduction to <span class="caps">JS</span> Test Driver by Miško Hevery</a> for a great<span class="widont">&nbsp;</span>overview.</p>
<p>Getting <span class="caps">JS</span> Test Driver up and running on your development workstation is easy enough. But how about on a continuous integration server such as <a href="http://www.jetbrains.com/teamcity/">TeamCity</a>?</p>
<p>It’s easy, just follow the instructions<span class="widont">&nbsp;</span>below!</p>
<p class="more"><a href="/blog/articles/running-js-test-driver-in-team-city/">more</a></p></section></article></div></div><footer><div class="content-wrap"><div class="nav"><a href="/blog/archives/">Archives</a><a href="/blog/page/2/">Older »</a></div><section class="about"><p>Personal homepage of <a href="/">Karl O’Keeffe</a>.</p>
</section></div></footer></body></html>